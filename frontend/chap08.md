# 第八章：实现画布页面的后台和前台

# 8.1 针对画布的需求分析

首先我们重新回顾一下需求：

- 需求 1：运营人员可以通过可视化的界面来配置首页的布局
  - 需求 1.1: 页面布局是由一个个区块组成的
    - 需求 1.1.1: 区块的定义就是一个包括内边距的矩形区域
    - 需求 1.1.2: 区块种类分为：图片行，轮播图，商品行，以及商品瀑布流
    - 需求 1.1.3: 图片行可以放一张图片，也可以放多张图片
      - 需求 1.1.3.1: 图片行中的图片是可以配置图片的链接以及点击跳转的链接
      - 需求 1.1.3.2: 一张图片时，图片按 `区块的宽度 - 2*内边距` 等比例缩放
      - 需求 1.1.3.3: 多于 3 张图片时，会形成可横向滑动的列表效果，但区别于小于等于 3 张图片的效果，需要显示第 4 张图片的 30%，以示还有更多图片。
      - 需求 1.1.3.4: 2-3 张图片时，会形成等宽的效果，也就是说，图片按 `区块的宽度 - 2*内边距 - 间距` 等比例缩放
    - 需求 1.1.4: 轮播图可以多张图片，每张图片可以配置图片的链接以及点击跳转的链接
    - 需求 1.1.5: 商品行可以放 1-2 个商品，注意这个需求也是一个假定的数量，每个公司根据运营需要不一定和我们课程一样的。单个商品的卡片样式和 2 个商品的卡片样式都由 UI 设计师提供。不提供配置卡片内的样式的能力。
    - 需求 1.1.6: 商品瀑布流比较特殊，它不是一个固定高度的区块，而是需要配置商品的类目，这个区块可以支持上拉加载更多的功能，也就是说，当用户滑动到这个区块的底部时，会自动加载下一页的商品。所以它的高度是不固定的。另外由于这个组件的特殊性，只能位于页面的最后一个区块，而且只能有一个。每个商品的卡片样式和一行 2 个商品的卡片样式一致。不提供配置卡片内的样式的能力。
  - 需求 1.2：运营人员不能接受太繁琐的配置步骤，比如太多的参数需要配置，太多的步骤需要操作。
    - 需求 1.2.1：运营人员可以通过拖拽的方式来调整顺序
    - 需求 1.2.2：运营人员可以通过点击的方式来配置区块的宽度，区块的内边距，区块背景色，边框颜色，边框宽度等等。
    - 需求 1.2.3：运营人员可以通过点击的方式来配置区块的数据，根据区块的类型，运营人员可以配置不同的数据
      - 需求 1.2.3.1：图片行的数据可以配置图片的链接以及点击跳转的链接
      - 需求 1.2.3.2：轮播图的数据可以配置图片的链接以及点击跳转的链接
      - 需求 1.2.3.3：商品行的数据可以配置商品，需要提供某种方式来搜索商品，比如输入商品名称，然后搜索出商品列表，然后运营人员可以选择商品
      - 需求 1.2.3.4：商品瀑布流的数据可以配置商品的类目 ID

从接口角度考虑，我们需要
